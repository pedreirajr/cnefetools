---
title: "FAQ"
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "faq_files/figure-html/"
)
```

## What is H3 and how does resolution work?

H3 is a geospatial indexing system developed by Uber that divides the world into hexagonal cells. Unlike traditional grids (squares), hexagons provide more uniform distances between neighboring cells and better represent spatial relationships.

The **resolution** parameter controls hexagon size across 16 levels (0-15). Lower resolutions create larger hexagons suitable for regional analysis, while higher resolutions create smaller hexagons that reveal neighborhood-level detail. Each resolution level reduces hexagon area by approximately 7×.

Learn more at [h3geo.org](https://h3geo.org/).

### Visual comparison: São Paulo at different resolutions

Below we show the same municipality (São Paulo - SP) at resolutions 1 through 9. Notice how finer resolutions reveal spatial patterns that are smoothed out at coarser scales.

The base function used in this example:

```{r, eval=FALSE}
library(cnefetools)

tracts_to_h3(
    code_muni = 3550308,  # São Paulo
    h3_resolution = res   # 1 to 9
  )
```

```{r, echo = FALSE, message=FALSE, warning=FALSE}
library(cnefetools)
library(dplyr)

hex_by_res <- lapply(1:9, function(res) {
  tracts_to_h3(
    code_muni = 3550308,
    h3_resolution = res,
    cache = TRUE,
    verbose = TRUE
  )
})

names(hex_by_res) <- paste0("h3_res_", 1:9)

```

```{r, echo=FALSE}
library(mapview)

mapviewOptions(
  legend.pos = "bottomright",
  fgb = FALSE
)

```

### H3 resolution = 1 (Average Hexagon Area = 609,788 km²)

```{r, echo=FALSE}
mapview(
  hex_by_res[[1]],
  zcol = "pop_ph",
  layer.name = "H3 resolution 1"
)
```

### H3 resolution = 2 (Average Hexagon Area = 86,802 km²)

```{r, echo=FALSE}
mapview(
  hex_by_res[[2]],
  zcol = "pop_ph",
  layer.name = "H3 resolution 2"
)
```

### H3 resolution = 3 (Average Hexagon Area = 12,393 km²)

```{r, echo=FALSE}
mapview(
  hex_by_res[[3]],
  zcol = "pop_ph",
  layer.name = "H3 resolution 3"
)
```

### H3 resolution = 4 (Average Hexagon Area = 1,770 km²)

```{r, echo=FALSE}
mapview(
  hex_by_res[[4]],
  zcol = "pop_ph",
  layer.name = "H3 resolution 4"
)

```

### H3 resolution = 5 (Average Hexagon Area = 253 km²)

```{r, echo=FALSE}
mapview(
  hex_by_res[[5]],
  zcol = "pop_ph",
  layer.name = "H3 resolution 5"
)
```

### H3 resolution = 6 (Average Hexagon Area = 36 km²)

```{r, echo=FALSE}
mapview(
  hex_by_res[[6]],
  zcol = "pop_ph",
  layer.name = "H3 resolution 6"
)
```

### H3 resolution = 7 (Average Hexagon Area = 5 km²)

```{r, echo=FALSE}
mapview(
  hex_by_res[[7]],
  zcol = "pop_ph",
  layer.name = "H3 resolution 7"
)
```

### H3 resolution = 8 (Average Hexagon Area = 0.7 km²)

```{r, echo=FALSE}
mapview(
  hex_by_res[[8]],
  zcol = "pop_ph",
  layer.name = "H3 resolution 8"
)
```

### H3 resolution  = 9 (Average Hexagon Area = 0.1 km²)

```{r, echo=FALSE}
mapview(
  hex_by_res[[9]],
  zcol = "pop_ph",
  layer.name = "H3 resolution 9"
)
```



