<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Read CNEFE data for a given municipality — read_cnefe • cnefetools</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Read CNEFE data for a given municipality — read_cnefe"><meta name="description" content="Downloads and reads the CNEFE CSV file for a given
IBGE municipality code, using the official IBGE FTP structure. The function
relies on an internal index linking municipality codes to the corresponding
ZIP URLs. Data are returned either as an Arrow Table
(default) or as an sf object with SIRGAS 2000 coordinates."><meta property="og:description" content="Downloads and reads the CNEFE CSV file for a given
IBGE municipality code, using the official IBGE FTP structure. The function
relies on an internal index linking municipality codes to the corresponding
ZIP URLs. Data are returned either as an Arrow Table
(default) or as an sf object with SIRGAS 2000 coordinates."><meta property="og:image" content="https://pedreirajr.github.io/cnefetools/logo.svg"><meta name="robots" content="noindex"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">cnefetools</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">0.2.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/read_cnefe.html">Reading and exploring CNEFE data</a></li>
    <li><a class="dropdown-item" href="../articles/cnefe_counts.html">Aggregating CNEFE address counts</a></li>
    <li><a class="dropdown-item" href="../articles/compute_lumi.html">Computing land-use mix indices with CNEFE data</a></li>
    <li><a class="dropdown-item" href="../articles/tracts_to.html">Dasymetric interpolation using CNEFE addresses</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Other</h6></li>
    <li><a class="dropdown-item" href="../articles/bench_duckdb.html">Performance benchmark: DuckDB vs pure-R backends</a></li>
    <li><a class="dropdown-item" href="../articles/faq.html">FAQ</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/pedreirajr/cnefetools/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Read CNEFE data for a given municipality</h1>
      <small class="dont-index">Source: <a href="https://github.com/pedreirajr/cnefetools/blob/dev/R/read_cnefe.R" class="external-link"><code>R/read_cnefe.R</code></a></small>
      <div class="d-none name"><code>read_cnefe.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Downloads and reads the CNEFE CSV file for a given
IBGE municipality code, using the official IBGE FTP structure. The function
relies on an internal index linking municipality codes to the corresponding
ZIP URLs. Data are returned either as an Arrow Table
(default) or as an <a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">sf</a> object with SIRGAS 2000 coordinates.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">read_cnefe</span><span class="op">(</span></span>
<span>  <span class="va">code_muni</span>,</span>
<span>  year <span class="op">=</span> <span class="fl">2022</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  cache <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  output <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"arrow"</span>, <span class="st">"sf"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-code-muni">code_muni<a class="anchor" aria-label="anchor" href="#arg-code-muni"></a></dt>
<dd><p>Integer. Seven-digit IBGE municipality code.</p></dd>


<dt id="arg-year">year<a class="anchor" aria-label="anchor" href="#arg-year"></a></dt>
<dd><p>Integer. The CNEFE data year. Currently only 2022 is supported.
Defaults to 2022.</p></dd>


<dt id="arg-verbose">verbose<a class="anchor" aria-label="anchor" href="#arg-verbose"></a></dt>
<dd><p>Logical; if <code>TRUE</code>, print informative messages about
download, extraction, and reading steps.</p></dd>


<dt id="arg-cache">cache<a class="anchor" aria-label="anchor" href="#arg-cache"></a></dt>
<dd><p>Logical; if <code>TRUE</code>, cache the downloaded ZIP file in a
user-level cache directory specific to this package. If <code>FALSE</code>, a
temporary file is used and removed after reading.</p></dd>


<dt id="arg-output">output<a class="anchor" aria-label="anchor" href="#arg-output"></a></dt>
<dd><p>Character. Output format. <code>"arrow"</code> (default) returns an
arrow::Table, whereas <code>"sf"</code> returns an <a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">sf</a> point object
with coordinates built from <code>LONGITUDE</code> / <code>LATITUDE</code> in CRS 4674.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>If <code>output = "arrow"</code>, an arrow::Table containing all CNEFE records for
the given municipality.</p>
<p>If <code>output = "sf"</code>, an <a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">sf</a> object with point geometry in
EPSG:4674 (SIRGAS 2000), using the <code>LONGITUDE</code> and <code>LATITUDE</code> columns.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>When <code>output = "arrow"</code> (default), the function does not perform any spatial
conversion and simply returns the Arrow table. When <code>output = "sf"</code>, the
function converts the result to an <a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">sf</a> point object using the
<code>LONGITUDE</code> and <code>LATITUDE</code> columns, with CRS EPSG:4674 (SIRGAS 2000),
keeping these columns in the final object (<code>remove = FALSE</code>).</p>
    </div>
    <div class="section level2">
    <h2 id="caching">Caching<a class="anchor" aria-label="anchor" href="#caching"></a></h2>


<p>When <code>cache = TRUE</code> (the default), the downloaded ZIP file is stored in a
user-level cache directory specific to this package, created via
<code><a href="https://rdrr.io/r/tools/userdir.html" class="external-link">tools::R_user_dir()</a></code> with <code>which = "cache"</code>. This avoids re-downloading
the same municipality file across sessions.</p>
<p>When <code>cache = FALSE</code>, the ZIP file is stored in a temporary location and
removed when the function exits.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># Read CNEFE data as an Arrow table</span></span></span>
<span class="r-in"><span><span class="va">cnefe</span> <span class="op">&lt;-</span> <span class="fu">read_cnefe</span><span class="op">(</span>code_muni <span class="op">=</span> <span class="fl">2929057</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Read as an sf spatial object</span></span></span>
<span class="r-in"><span><span class="va">cnefe_sf</span> <span class="op">&lt;-</span> <span class="fu">read_cnefe</span><span class="op">(</span>code_muni <span class="op">=</span> <span class="fl">2929057</span>, output <span class="op">=</span> <span class="st">"sf"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Jorge Ubirajara Pedreira Junior, Bruno Mioto.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

